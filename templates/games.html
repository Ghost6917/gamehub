<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Games - GameHub</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="/static/js/dist/games.js"></script>
        <link rel="stylesheet" href="/static/css/selection.css" />
    </head>

    <body class="bg-zinc-900">
        <div class="flex flex-wrap bg-zinc-900 w-full">
            <div
                class="fixed z-10 inset-0 overflow-y-auto hidden"
                aria-labelledby="modal-title"
                role="dialog"
                aria-modal="true"
                data-type="modal"
                id="comment-modal"
            >
                <div
                    class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
                >
                    <div
                        class="fixed inset-0 bg-zinc-900 bg-opacity-75 transition-opacity"
                        aria-hidden="true"
                    ></div>

                    <span
                        class="hidden md:inline-block sm:align-middle sm:h-screen"
                        aria-hidden="true"
                        >&#8203;</span
                    >
                    <div
                        class="relative inline-block align-bottom bg-zinc-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
                    >
                        <div class="bg-zinc-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                            <div class="flex">
                                <p
                                    class="justify-start text-6xl lg:text-xl font-medium text-white"
                                >
                                    Comments
                                </p>
                                <button
                                    type="button"
                                    class="justify-end rounded-lg lg:text-sm ml-auto text-zinc-500 hover:text-zinc-400 transition-all"
                                    data-type="modalclose"
                                >
                                    <svg
                                        class="w-12 h-12 lg:w-6 lg:h-6"
                                        fill="currentColor"
                                        viewBox="0 0 20 20"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            fill-rule="evenodd"
                                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                            clip-rule="evenodd"
                                        ></path>
                                    </svg>
                                </button>
                            </div>
                            <span class="overflow-y-scroll h-72 hidden"></span>
                            <!-- so these classes get picked up by tailwind -->
                            <ul id="commentBody">
                                <div class="text-center p-4">
                                    <p
                                        class="text-rose-400 text-lg font-bold lg:text-md"
                                    >
                                        Failed to fetch comments
                                    </p>
                                </div>
                            </ul>
                            {% if user %}
                            <form action="#" id="comment-form" class="pt-2">
                                <small></small>
                                <label
                                    for="content"
                                    class="block mb-2 text-4xl lg:text-sm font-medium text-zinc-400"
                                    >Comment</label
                                >

                                <div class="flex h-fit">
                                    <div class="w-full">
                                        <input
                                            type="text"
                                            name="content"
                                            id="comment-content"
                                            placeholder="The FitnessGram Pacer test is a multistage aerobic capacity test..."
                                            class="bg-zinc-900 w-full text-3xl lg:text-sm rounded-lg bloc p-2.5 focus:bg-zinc-700 text-white focus:outline-none"
                                        ></input>
                                        <small class="z-20"></small>
                                    </div>
                                    <div class="pl-2">
                                        <button
                                            data-form-exclude="true"
                                            type="submit"
                                            class="font-bold drop-shadow-md border-solid border-2 border-emerald-400 hover:bg-emerald-400 p-6 lg:p-2 rounded-lg lg:rounded transition-all duration-300 w-full text-white bg-zinc-900 h-full"
                                        >
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                class="h-5 w-5"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                                stroke-width="2"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"
                                                />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <small></small>
                            </form>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {{ nav|safe }}

            <div class="w-9/12 text-white">
                <div class="p-4">
                    <h1
                        class="text-white text-5xl lg:text-6xl font-bold text-center"
                    >
                        Games
                    </h1>
                </div>
                <div class="p-4">
                    <div
                        class="grid grid-cols-1 md:grid-cols-2 gap-5 p-7 first:pt-4 last:pb-4"
                    >
                        {% for game in games %}
                        <div class="bg-zinc-800 rounded p-4 drop-shadow-lg">
                            <div
                                class="group {{ 'text-rose-500' if liked(user.username, game.likes) else 'text-zinc-400' }} {{ 'hover:text-rose-400' if liked(user.username, game.likes) else 'hover:text-zinc-300' }} w-fit transition-all flex items-center space-x-3"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8 lg:h-6 lg:w-6 group-hover:drop-shadow-lg"
                                    viewBox="0 0 20 20"
                                    fill="currentColor"
                                >
                                    <path
                                        d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"
                                    />
                                </svg>
                                <p
                                    class="font-bold select-none text-xl sm:text-md md:text-xl lg:text-lg"
                                >
                                    {{ len(game.likes) }}
                                </p>
                                <span
                                    class="lg:group-hover:scale-100 absolute w-auto p-2 m-2 min-w-max left-14 rounded-md shadow-md text-white bg-zinc-700 text-xs font-bold transition-all duration-100 scale-0 origin-left"
                                    >{{ 'Unlike' if liked(user.username,
                                    game.likes) else 'Like' }}</span
                                >
                            </div>

                            <div
                                class="group text-zinc-400 w-fit transition-all flex items-center space-x-3 hover:text-zinc-300"
                                data-type="opencomments"
                                data-game-name="{{ game.name }}"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8 lg:h-6 lg:w-6 group-hover:drop-shadow-lg"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"
                                    />
                                </svg>
                                <p
                                    class="font-bold select-none text-xl sm:text-md md:text-xl lg:text-lg"
                                >
                                    {{ len(game.comments) }}
                                </p>
                                <span
                                    class="lg:group-hover:scale-100 absolute w-auto p-2 m-2 min-w-max left-14 rounded-md shadow-md text-white bg-zinc-700 text-xs font-bold transition-all duration-100 scale-0 origin-left"
                                    >Comments</span
                                >
                            </div>
                            <p class="text-zinc-200 text-3xl md:text-2xl">
                                {{ game.name }}
                            </p>
                            <div class="py-4">
                                <hr class="w-full border-t border-zinc-700" />
                            </div>

                            <div class="grid grid-cols-3 text-center">
                                <a
                                    href="{{ game.data }}"
                                    class="drop-shadow-lg md:bg-zinc-800 bg-orange-400 border-solid border-2 border-orange-400 md:hover:bg-orange-400 sm:p-2 md:p-1 lg:p-2 rounded transition-all text-xl md:text-lg lg:text-xl duration-300"
                                >
                                    Play
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
